(this["webpackJsonpzaitacount-frontend"]=this["webpackJsonpzaitacount-frontend"]||[]).push([[0],{78:function(n,e,t){},90:function(n,e,t){"use strict";t.r(e);var r,o=t(4),a=t(2),c=t(11),i=t(66),s=t.n(i),l=t(69),d=(t(78),t(93)),u=t(94),j=t(41);function h(){var n=Object(j.a)(["\n    query viewer {\n  viewer {\n    id\n  }\n}\n    "]);return h=function(){return n},n}function b(){var n=Object(j.a)(["\n    query monthlyInfos($year: Int!, $month: Int!) {\n  monthlyInfos(year: $year, month: $month) {\n    workFromHomeCount\n    purchased\n    amount\n    lineUser {\n      fixedProfile {\n        name\n      }\n    }\n  }\n}\n    "]);return b=function(){return n},n}function m(){var n=Object(j.a)(["\n    mutation signIn($loginid: String, $password: String) {\n  signIn(input: {loginid: $loginid, password: $password}) {\n    user {\n      accessToken {\n        token\n      }\n    }\n    result\n  }\n}\n    "]);return m=function(){return n},n}!function(n){n.Yes="YES",n.No="NO"}(r||(r={}));var O=Object(c.gql)(m());var v=Object(c.gql)(b());var f=Object(c.gql)(h());function x(n){return c.useQuery(f,n)}var g=function(n){var e=n.children,t=x({fetchPolicy:"network-only"}),r=t.loading,a=t.data;return r?Object(o.jsx)(o.Fragment,{children:"Loading..."}):(null===a||void 0===a?void 0:a.viewer)?Object(o.jsx)("main",{className:"container",children:e}):Object(o.jsx)(l.a,{to:"/zaitacount-frontend/sign-in"})},p=function(n){var e,t=n.year,r=n.month,a=(e={fetchPolicy:"network-only",variables:{year:t,month:r}},c.useQuery(v,e)),i=a.loading,s=a.data;if(i)return Object(o.jsx)(o.Fragment,{children:"Loading..."});var l=null===s||void 0===s?void 0:s.monthlyInfos;return(null===l||void 0===l?void 0:l.length)?Object(o.jsxs)("table",{className:"table",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{className:"border-0",children:"\u540d\u524d"}),Object(o.jsx)("th",{className:"border-0",children:"\u5728\u5b85\u6570"}),Object(o.jsx)("th",{className:"border-0",children:"\u5b9a\u671f\u8cfc\u5165"}),Object(o.jsx)("th",{className:"border-0",children:"\u4ea4\u901a\u8cbb"})]})}),Object(o.jsx)("tbody",{children:l&&l.map((function(n,e){var t=null===n||void 0===n?void 0:n.amount,r=null===n||void 0===n?void 0:n.purchased,a=null===n||void 0===n?void 0:n.workFromHomeCount,c=null===n||void 0===n?void 0:n.lineUser.fixedProfile.name;return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:c}),Object(o.jsxs)("td",{children:[a," \u56de"]}),Object(o.jsx)("td",{children:"YES"===r?"\u6709":"\u7121"}),Object(o.jsxs)("td",{children:[t," \u5186"]})]},e)}))})]}):Object(o.jsx)(o.Fragment,{children:"No Data"})},w=t(25),y=t(72),N=function(n){var e=n.options,t=Object(y.a)(n,["options"]);return Object(o.jsx)("select",Object(w.a)(Object(w.a)({},t),{},{children:e.map((function(n,e){return Object(o.jsx)("option",{children:n},e)}))}))},k=function(n){var e=n.match.params,t=e.year,r=e.month,a=n.history;if(!t||!r||!Number(t)||!Number(r)){var c=new Date;return Object(o.jsx)(l.a,{to:"/zaitacount-frontend/".concat(Object(d.a)(c),"/").concat(Object(u.a)(c)+1)})}var i=Number(t),s=Array(10).fill(null).map((function(n,e){return i+5-e})),j=Number(r),h=Array(12).fill(null).map((function(n,e){return e+1})),b=function(n,e){a.push("/zaitacount-frontend/".concat(n,"/").concat(e))};return Object(o.jsx)(g,{children:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"my-3 p-3 bg-white rounded shadow",children:Object(o.jsx)("div",{className:"border-gray mb-0",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-md-6 mb-3",children:[Object(o.jsx)("label",{htmlFor:"year",children:"Year"}),Object(o.jsx)(N,{className:"custom-select d-block w-100",id:"year",value:t,options:s,onChange:function(n){return b(n.target.value,r)}})]}),Object(o.jsxs)("div",{className:"col-md-6 mb-3",children:[Object(o.jsx)("label",{htmlFor:"month",children:"Month"}),Object(o.jsx)(N,{className:"custom-select d-block w-100",id:"month",value:r,options:h,onChange:function(n){return b(t,n.target.value)}})]})]})})}),Object(o.jsx)("div",{className:"my-3 p-3 bg-white rounded shadow",children:Object(o.jsx)(p,{year:i,month:j})})]})})},I=t(42),F=t(95),z=function(n){return Object(o.jsx)("input",Object(w.a)({},n))};z.defaultProps={type:"text"};var P=z,C=t(20),S=Object(C.a)(),$=function(){var n,e=Object(a.useState)(),t=Object(I.a)(e,2),r=t[0],i=t[1],s=Object(a.useState)(),l=Object(I.a)(s,2),d=l[0],u=l[1],j=(n={update:function(n,e){var t,r=e.data;if(null===r||void 0===r||null===(t=r.signIn)||void 0===t?void 0:t.result){var o,a,c,i=null===r||void 0===r||null===(o=r.signIn)||void 0===o||null===(a=o.user)||void 0===a||null===(c=a.accessToken)||void 0===c?void 0:c.token;localStorage.setItem("zaitacount-token",i),S.push("/zaitacount-frontend/")}else alert("Incorrect login id or password")},variables:{loginid:r,password:d}},c.useMutation(O,n)),h=Object(I.a)(j,1)[0];return Object(o.jsxs)("div",{className:"form-signin",children:[Object(o.jsx)("h1",{className:"h3 mb-3 font-weight-normal text-center",children:"Please sign in"}),Object(o.jsx)("label",{htmlFor:"inputLoginid",className:"sr-only",children:"Login id"}),Object(o.jsx)(P,{id:"inputLoginid",className:"form-control",placeholder:"Login id",required:!0,autoFocus:!0,value:r||"",onChange:function(n){return i(n.target.value)}}),Object(o.jsx)("label",{htmlFor:"inputPassword",className:"sr-only",children:"Password"}),Object(o.jsx)(P,{id:"inputPassword",type:"password",className:"form-control",placeholder:"Password",required:!0,value:d||"",onChange:function(n){return u(n.target.value)}}),Object(o.jsx)(F.a,{variant:"primary",block:!0,onClick:function(){return h()},children:"Sign In"})]})},q=function(){var n=x({fetchPolicy:"network-only"}),e=n.loading,t=n.data;return e?Object(o.jsx)(o.Fragment,{children:"Loading..."}):(null===t||void 0===t?void 0:t.viewer)?Object(o.jsx)(l.a,{to:"/zaitacount-frontend"}):Object(o.jsx)($,{})},L=function(){return Object(o.jsxs)(l.d,{children:[Object(o.jsx)(l.b,{exact:!0,path:"/zaitacount-frontend/:year?/:month?",component:k}),Object(o.jsx)(l.b,{exact:!0,path:"/zaitacount-frontend/sign-in",component:q})]})},A=t(71),Y="".concat("https://adachi-zaitacount-backend.herokuapp.com/","/graphql"),E=Object(c.createHttpLink)({uri:Y}),H=Object(A.a)((function(n,e){var t=e.headers;return{headers:Object(w.a)(Object(w.a)({},t),{},{"X-Forwarded-User":localStorage.getItem("zaitacount-token")})}})),M=new c.ApolloClient({link:H.concat(E),cache:new c.InMemoryCache});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(o.jsx)(l.c,{history:S,children:Object(o.jsx)(c.ApolloProvider,{client:M,children:Object(o.jsx)(L,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[90,1,2]]]);
//# sourceMappingURL=main.dd5da1aa.chunk.js.map