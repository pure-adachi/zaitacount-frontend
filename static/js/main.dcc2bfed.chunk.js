(this["webpackJsonpzaitacount-frontend"]=this["webpackJsonpzaitacount-frontend"]||[]).push([[0],{79:function(e,n,t){},91:function(e,n,t){"use strict";t.r(n);var r,o=t(4),a=t(2),c=t(11),i=t(66),s=t.n(i),l=t(69),d=(t(79),t(93)),u=t(94),j=t(95),h=t(41);function b(){var e=Object(h.a)(["\n    query viewer {\n  viewer {\n    id\n  }\n}\n    "]);return b=function(){return e},e}function m(){var e=Object(h.a)(["\n    query monthlyInfos($year: Int!, $month: Int!) {\n  monthlyInfos(year: $year, month: $month) {\n    workFromHomeCount\n    purchased\n    amount\n    lineUser {\n      fixedProfile {\n        name\n      }\n    }\n  }\n}\n    "]);return m=function(){return e},e}function v(){var e=Object(h.a)(["\n    mutation signIn($loginid: String, $password: String) {\n  signIn(input: {loginid: $loginid, password: $password}) {\n    user {\n      accessToken {\n        token\n      }\n    }\n    result\n  }\n}\n    "]);return v=function(){return e},e}!function(e){e.Yes="YES",e.No="NO"}(r||(r={}));var O=Object(c.gql)(v());var f=Object(c.gql)(m());var x=Object(c.gql)(b());function g(e){return c.useQuery(x,e)}var p=function(e){var n=e.children,t=g({fetchPolicy:"network-only"}),r=t.loading,a=t.data;return r?Object(o.jsx)(o.Fragment,{children:"Loading..."}):(null===a||void 0===a?void 0:a.viewer)?Object(o.jsx)(o.Fragment,{children:n}):Object(o.jsx)(l.a,{to:"/zaitacount-frontend/sign-in"})},w=function(e){var n,t=e.year,r=e.month,a=(n={fetchPolicy:"network-only",variables:{year:t,month:r}},c.useQuery(f,n)),i=a.loading,s=a.data;if(i)return Object(o.jsx)(o.Fragment,{children:"Loading..."});var l=null===s||void 0===s?void 0:s.monthlyInfos;return(null===l||void 0===l?void 0:l.length)?Object(o.jsxs)("table",{className:"table",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{className:"border-0",children:"\u540d\u524d"}),Object(o.jsx)("th",{className:"border-0",children:"\u5728\u5b85\u6570"}),Object(o.jsx)("th",{className:"border-0",children:"\u5b9a\u671f\u8cfc\u5165"}),Object(o.jsx)("th",{className:"border-0",children:"\u4ea4\u901a\u8cbb"})]})}),Object(o.jsx)("tbody",{children:l&&l.map((function(e,n){var t=null===e||void 0===e?void 0:e.amount,r=null===e||void 0===e?void 0:e.purchased,a=null===e||void 0===e?void 0:e.workFromHomeCount,c=null===e||void 0===e?void 0:e.lineUser.fixedProfile.name;return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:c}),Object(o.jsxs)("td",{children:[a," \u56de"]}),Object(o.jsx)("td",{children:"YES"===r?"\u6709":"\u7121"}),Object(o.jsxs)("td",{children:[t," \u5186"]})]},n)}))})]}):Object(o.jsx)(o.Fragment,{children:"No Data"})},y=t(25),N=t(72),k=function(e){var n=e.options,t=Object(N.a)(e,["options"]);return Object(o.jsx)("select",Object(y.a)(Object(y.a)({},t),{},{children:n.map((function(e,n){return Object(o.jsx)("option",{children:e},n)}))}))},I=function(e){var n=e.match.params,t=n.year,r=n.month,a=e.history;if(!t||!r||!Number(t)||!Number(r)){var c=new Date;return Object(o.jsx)(l.a,{to:"/zaitacount-frontend/".concat(Object(d.a)(c),"/").concat(Object(u.a)(c)+1)})}var i=Number(t),s=Array(10).fill(null).map((function(e,n){return i+5-n})),h=Number(r),b=Array(12).fill(null).map((function(e,n){return n+1})),m=function(e,n){a.push("/zaitacount-frontend/".concat(e,"/").concat(n))};return Object(o.jsx)(p,{children:Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow",children:[Object(o.jsx)("h5",{className:"my-0 mr-md-auto font-weight-normal",children:"Zaitacount"}),Object(o.jsx)(j.a,{variant:"outline-primary",size:"sm",onClick:function(){localStorage.removeItem("zaitacount-token"),a.push("/zaitacount-frontend/sign-in")},children:"Sign out"})]}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("div",{className:"my-3 p-3 bg-white rounded shadow",children:Object(o.jsx)("div",{className:"border-gray mb-0",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-md-6 mb-3",children:[Object(o.jsx)("label",{htmlFor:"year",children:"Year"}),Object(o.jsx)(k,{className:"custom-select d-block w-100",id:"year",value:t,options:s,onChange:function(e){return m(e.target.value,r)}})]}),Object(o.jsxs)("div",{className:"col-md-6 mb-3",children:[Object(o.jsx)("label",{htmlFor:"month",children:"Month"}),Object(o.jsx)(k,{className:"custom-select d-block w-100",id:"month",value:r,options:b,onChange:function(e){return m(t,e.target.value)}})]})]})})}),Object(o.jsx)("div",{className:"my-3 p-3 bg-white rounded shadow",children:Object(o.jsx)(w,{year:i,month:h})})]})]})})},z=t(42),F=function(e){return Object(o.jsx)("input",Object(y.a)({},e))};F.defaultProps={type:"text"};var P=F,S=t(20),C=Object(S.a)(),$=function(){var e,n=Object(a.useState)(),t=Object(z.a)(n,2),r=t[0],i=t[1],s=Object(a.useState)(),l=Object(z.a)(s,2),d=l[0],u=l[1],h=(e={update:function(e,n){var t,r=n.data;if(null===r||void 0===r||null===(t=r.signIn)||void 0===t?void 0:t.result){var o,a,c,i=null===r||void 0===r||null===(o=r.signIn)||void 0===o||null===(a=o.user)||void 0===a||null===(c=a.accessToken)||void 0===c?void 0:c.token;localStorage.setItem("zaitacount-token",i),C.push("/zaitacount-frontend/")}else alert("Incorrect login id or password")},variables:{loginid:r,password:d}},c.useMutation(O,e)),b=Object(z.a)(h,1)[0];return Object(o.jsxs)("div",{className:"form-signin",children:[Object(o.jsx)("h1",{className:"h3 mb-3 font-weight-normal text-center",children:"Please sign in"}),Object(o.jsx)("label",{htmlFor:"inputLoginid",className:"sr-only",children:"Login id"}),Object(o.jsx)(P,{id:"inputLoginid",className:"form-control",placeholder:"Login id",required:!0,autoFocus:!0,value:r||"",onChange:function(e){return i(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"inputPassword",className:"sr-only",children:"Password"}),Object(o.jsx)(P,{id:"inputPassword",type:"password",className:"form-control",placeholder:"Password",required:!0,value:d||"",onChange:function(e){return u(e.target.value)}}),Object(o.jsx)(j.a,{variant:"primary",block:!0,onClick:function(){return b()},children:"Sign In"})]})},q=function(){var e=g({fetchPolicy:"network-only"}),n=e.loading,t=e.data;return n?Object(o.jsx)(o.Fragment,{children:"Loading..."}):(null===t||void 0===t?void 0:t.viewer)?Object(o.jsx)(l.a,{to:"/zaitacount-frontend"}):Object(o.jsx)($,{})},L=function(){return Object(o.jsxs)(l.d,{children:[Object(o.jsx)(l.b,{exact:!0,path:"/zaitacount-frontend/sign-in",component:q}),Object(o.jsx)(l.b,{exact:!0,path:"/zaitacount-frontend/:year?/:month?",component:I})]})},A=t(71),Y="".concat("https://adachi-zaitacount-backend.herokuapp.com/","/graphql"),E=Object(c.createHttpLink)({uri:Y}),H=Object(A.a)((function(e,n){var t=n.headers;return{headers:Object(y.a)(Object(y.a)({},t),{},{"X-Forwarded-User":localStorage.getItem("zaitacount-token")})}})),M=new c.ApolloClient({link:H.concat(E),cache:new c.InMemoryCache});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(o.jsx)(l.c,{history:C,children:Object(o.jsx)(c.ApolloProvider,{client:M,children:Object(o.jsx)(L,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[91,1,2]]]);
//# sourceMappingURL=main.dcc2bfed.chunk.js.map