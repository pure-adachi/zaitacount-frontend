(this["webpackJsonpzaitacount-frontend"]=this["webpackJsonpzaitacount-frontend"]||[]).push([[0],{74:function(n,e,t){},86:function(n,e,t){"use strict";t.r(e);var o=t(4),r=t(2),a=t(16),i=t(64),c=t.n(i),s=t(88),l=(t(74),t(45));function u(){var n=Object(l.a)(["\n    query viewer {\n  viewer {\n    id\n  }\n}\n    "]);return u=function(){return n},n}function d(){var n=Object(l.a)(["\n    mutation signIn($loginid: String, $password: String) {\n  signIn(input: {loginid: $loginid, password: $password}) {\n    user {\n      accessToken {\n        token\n      }\n    }\n    result\n  }\n}\n    "]);return d=function(){return n},n}var j=Object(a.gql)(d());var b=Object(a.gql)(u());function h(n){return a.useQuery(b,n)}var g=function(n){var e=n.children,t=h({fetchPolicy:"network-only"}),r=t.loading,a=t.data;return r?Object(o.jsx)(o.Fragment,{children:"Loading..."}):(null===a||void 0===a?void 0:a.viewer)?Object(o.jsx)(o.Fragment,{children:e}):Object(o.jsx)(s.a,{to:"/zaitacount-frontend/sign-in"})},v=function(){return Object(o.jsx)(g,{children:Object(o.jsx)(o.Fragment,{children:"Home"})})},O=t(39),p=t(89),f=t(30),m=function(n){return Object(o.jsx)("input",Object(f.a)({},n))};m.defaultProps={type:"text"};var w=m,x=t(20),k=Object(x.a)(),y=function(){var n,e=Object(r.useState)(),t=Object(O.a)(e,2),i=t[0],c=t[1],s=Object(r.useState)(),l=Object(O.a)(s,2),u=l[0],d=l[1],b=(n={update:function(n,e){var t,o=e.data;if(null===o||void 0===o||null===(t=o.signIn)||void 0===t?void 0:t.result){var r,a,i,c=null===o||void 0===o||null===(r=o.signIn)||void 0===r||null===(a=r.user)||void 0===a||null===(i=a.accessToken)||void 0===i?void 0:i.token;localStorage.setItem("zaitacount-token",c),k.push("/zaitacount-frontend/")}else alert("Incorrect login id or password")},variables:{loginid:i,password:u}},a.useMutation(j,n)),h=Object(O.a)(b,1)[0];return Object(o.jsxs)("div",{className:"form-signin",children:[Object(o.jsx)("h1",{className:"h3 mb-3 font-weight-normal text-center",children:"Please sign in"}),Object(o.jsx)("label",{htmlFor:"inputLoginid",className:"sr-only",children:"Login id"}),Object(o.jsx)(w,{id:"inputLoginid",className:"form-control",placeholder:"Login id",required:!0,autoFocus:!0,value:i||"",onChange:function(n){return c(n.target.value)}}),Object(o.jsx)("label",{htmlFor:"inputPassword",className:"sr-only",children:"Password"}),Object(o.jsx)(w,{id:"inputPassword",type:"password",className:"form-control",placeholder:"Password",required:!0,value:u||"",onChange:function(n){return d(n.target.value)}}),Object(o.jsx)(p.a,{variant:"primary",block:!0,onClick:function(){return h()},children:"Sign In"})]})},z=function(){var n=h({fetchPolicy:"network-only"}),e=n.loading,t=n.data;return e?Object(o.jsx)(o.Fragment,{children:"Loading..."}):(null===t||void 0===t?void 0:t.viewer)?Object(o.jsx)(s.a,{to:"/zaitacount-frontend"}):Object(o.jsx)(y,{})},I=function(){return Object(o.jsxs)(s.d,{children:[Object(o.jsx)(s.b,{exact:!0,path:"/zaitacount-frontend/",component:v}),Object(o.jsx)(s.b,{exact:!0,path:"/zaitacount-frontend/sign-in",component:z})]})},P=t(68),F="".concat("https://adachi-zaitacount-backend.herokuapp.com/","/graphql"),L=Object(a.createHttpLink)({uri:F}),S=Object(P.a)((function(n,e){var t=e.headers;return{headers:Object(f.a)(Object(f.a)({},t),{},{"X-Forwarded-User":localStorage.getItem("zaitacount-token")})}})),q=new a.ApolloClient({link:S.concat(L),cache:new a.InMemoryCache});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(o.jsx)(s.c,{history:k,children:Object(o.jsx)(a.ApolloProvider,{client:q,children:Object(o.jsx)(I,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[86,1,2]]]);
//# sourceMappingURL=main.065021ea.chunk.js.map